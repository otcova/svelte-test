var j=Object.defineProperty;var G=(n,e,t)=>e in n?j(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var h=(n,e,t)=>(G(n,typeof e!="symbol"?e+"":e,t),t);import{S as M,i as b,s as q,k as E,l as I,m as T,h as u,n as w,p,I as _,b as y,B as k,o as D,J as L,d as S,f as m,t as d,e as v,w as H,a as O,x as J,c as Q,y as K,g as R,z as W,K as U}from"../../chunks/index-fc46f458.js";function X(n){let e;return{c(){e=E("div"),this.h()},l(t){e=I(t,"DIV",{class:!0,style:!0}),T(e).forEach(u),this.h()},h(){w(e,"class","line svelte-1xnmskn"),p(e,"--len",n[3]+"px"),p(e,"--x",n[0].x+"px"),p(e,"--y",n[0].y+"px"),p(e,"--a",n[2]+"rad"),_(e,"show",n[1])},m(t,s){y(t,e,s)},p(t,[s]){s&1&&p(e,"--x",t[0].x+"px"),s&1&&p(e,"--y",t[0].y+"px"),s&2&&_(e,"show",t[1])},i:k,o:k,d(t){t&&u(e)}}}function Y(n,e,t){let{pos:s}=e,{parent:o}=e,a=Math.atan2(s.y-o.y,s.x-o.x),f=Math.sqrt((s.y-o.y)**2+(s.x-o.x)**2),i=!1;return D(()=>requestAnimationFrame(()=>setTimeout(()=>t(1,i=!0),100))),n.$$set=l=>{"pos"in l&&t(4,s=l.pos),"parent"in l&&t(0,o=l.parent)},[o,i,a,f,s]}class Z extends M{constructor(e){super(),b(this,e,Y,X,q,{pos:4,parent:0})}}function B(n,e,t,s){const o=e.x-n.x,a=e.y-n.y,f=s.x-t.x,i=s.y-t.y,l=(-a*(n.x-t.x)+o*(n.y-t.y))/(-f*a+o*i),r=(f*(n.y-t.y)-i*(n.x-t.x))/(-f*a+o*i),c=.001;return c<l&&l<1-c&&c<r&&r<1-c}function N(n,e,t,s){var o;const a=s.x-t.x,f=s.y-t.y,i=n.x-t.x,l=n.y-t.y,r=(i*a+l*f)/(f*f+a*a);return r>=0&&r<=1?o=(t.x+a*r-n.x)**2+(t.y+f*r-n.y)**2:o=r<0?(t.x-n.x)**2+(t.y-n.y)**2:(s.x-n.x)**2+(s.y-n.y)**2,o<e**2}class g{constructor(e,t){h(this,"pos");h(this,"parent");h(this,"children",[]);h(this,"fill");h(this,"onResize");h(this,"spawnTries",0);if(e instanceof g){this.parent=e;const s=(220-Math.random()*120)/5,o=t??Math.random()*Math.PI*2;this.pos={x:e.pos.x+s*Math.cos(o),y:e.pos.y+s*Math.sin(o)}}else this.pos=e;this.fill=Math.random()<.2}collide_with_node(e){return e.parent&&N(this.pos,12,e.pos,e.parent.pos)?!0:e==this.parent?!1:!!((e.pos.x-this.pos.x)**2+(e.pos.y-this.pos.y)**2<12**2||this.parent&&N(e.pos,12,this.pos,this.parent.pos)||e.parent&&this.parent&&B(this.pos,this.parent.pos,e.pos,e.parent.pos))}collide_with_screen(){return this.pos.x<40||this.pos.y<40||this.pos.x>innerWidth-40||this.pos.y>innerHeight-40}valid_position(e){if(this.collide_with_screen())return!1;for(const t of e)if(this.collide_with_node(t))return!1;return!0}}function $(n,e,t){for(;t-- >0;){const o=new g(n);o.valid_position(e)&&e.push(o)}const s=new g(n,.5+Math.random()*.5);s.valid_position(e)&&e.push(s)}function A(n){let e;return{c(){e=E("div"),this.h()},l(t){e=I(t,"DIV",{class:!0,style:!0}),T(e).forEach(u),this.h()},h(){w(e,"class","node svelte-i67kd6"),p(e,"--x",n[0].x+"px"),p(e,"--y",n[0].y+"px"),p(e,"--x0",n[3].x+"px"),p(e,"--y0",n[3].y+"px"),_(e,"fill",n[1]),_(e,"show",n[2])},m(t,s){y(t,e,s)},p(t,[s]){s&1&&p(e,"--x",t[0].x+"px"),s&1&&p(e,"--y",t[0].y+"px"),s&2&&_(e,"fill",t[1]),s&4&&_(e,"show",t[2])},i:k,o:k,d(t){t&&u(e)}}}function C(n,e,t){let{pos:s}=e,{parent:o}=e,{fill:a=!1}=e,f=o??s,i=!1;return D(()=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t(2,i=!0)))}),n.$$set=l=>{"pos"in l&&t(0,s=l.pos),"parent"in l&&t(4,o=l.parent),"fill"in l&&t(1,a=l.fill)},[s,a,i,f,o]}class ee extends M{constructor(e){super(),b(this,e,C,A,q,{pos:0,parent:4,fill:1})}}function V(n,e,t){const s=n.slice();return s[3]=e[t],s}function z(n){let e,t;return e=new Z({props:{pos:n[3].pos,parent:n[3].parent.pos}}),{c(){H(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,o){K(e,s,o),t=!0},p(s,o){const a={};o&1&&(a.pos=s[3].pos),o&1&&(a.parent=s[3].parent.pos),e.$set(a)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){W(e,s)}}}function P(n,e){var l;let t,s,o,a,f;s=new ee({props:{pos:e[3].pos,parent:(l=e[3].parent)==null?void 0:l.pos,fill:e[3].fill}});let i=e[3].parent&&z(e);return{key:n,first:null,c(){t=v(),H(s.$$.fragment),o=O(),i&&i.c(),a=v(),this.h()},l(r){t=v(),J(s.$$.fragment,r),o=Q(r),i&&i.l(r),a=v(),this.h()},h(){this.first=t},m(r,c){y(r,t,c),K(s,r,c),y(r,o,c),i&&i.m(r,c),y(r,a,c),f=!0},p(r,c){var F;e=r;const x={};c&1&&(x.pos=e[3].pos),c&1&&(x.parent=(F=e[3].parent)==null?void 0:F.pos),c&1&&(x.fill=e[3].fill),s.$set(x),e[3].parent?i?(i.p(e,c),c&1&&m(i,1)):(i=z(e),i.c(),m(i,1),i.m(a.parentNode,a)):i&&(R(),d(i,1,1,()=>{i=null}),S())},i(r){f||(m(s.$$.fragment,r),m(i),f=!0)},o(r){d(s.$$.fragment,r),d(i),f=!1},d(r){r&&u(t),W(s,r),r&&u(o),i&&i.d(r),r&&u(a)}}}function te(n){let e,t=[],s=new Map,o,a=n[0];const f=i=>i[3];for(let i=0;i<a.length;i+=1){let l=V(n,a,i),r=f(l);s.set(r,t[i]=P(r,l))}return{c(){e=E("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=I(i,"DIV",{id:!0,class:!0});var l=T(e);for(let r=0;r<t.length;r+=1)t[r].l(l);l.forEach(u),this.h()},h(){w(e,"id","container"),w(e,"class","svelte-4l6f4e")},m(i,l){y(i,e,l);for(let r=0;r<t.length;r+=1)t[r].m(e,null);o=!0},p(i,[l]){l&1&&(a=i[0],R(),t=L(t,l,f,1,i,a,s,e,U,P,null,V),S())},i(i){if(!o){for(let l=0;l<a.length;l+=1)m(t[l]);o=!0}},o(i){for(let l=0;l<t.length;l+=1)d(t[l]);o=!1},d(i){i&&u(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function se(n,e,t){let s=[new g({x:30,y:30})],o=0;D(()=>{setTimeout(a,100)});function a(){const f=s.length;for(;o<f;)$(s[o++],s,10);s.length!=f&&t(0,s),setTimeout(a,500)}return[s]}class oe extends M{constructor(e){super(),b(this,e,se,te,q,{})}}export{oe as default};
