var R=Object.defineProperty;var j=(n,e,t)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>(j(n,typeof e!="symbol"?e+"":e,t),t);import{S as k,i as I,s as P,k as b,l as W,m as q,h as p,n as w,p as c,I as _,b as y,B as M,o as E,J as G,d as V,f as m,t as d,e as v,w as H,a as O,x as J,c as Q,y as K,g as L,z as N,K as U}from"../../chunks/index-fc46f458.js";function X(n){let e;return{c(){e=b("div"),this.h()},l(t){e=W(t,"DIV",{class:!0,style:!0}),q(e).forEach(p),this.h()},h(){w(e,"class","line svelte-z9gsf"),c(e,"--len",n[3]+"px"),c(e,"--x",n[0].x+"px"),c(e,"--y",n[0].y+"px"),c(e,"--a",n[2]+"rad"),_(e,"show",n[1])},m(t,s){y(t,e,s)},p(t,[s]){s&1&&c(e,"--x",t[0].x+"px"),s&1&&c(e,"--y",t[0].y+"px"),s&2&&_(e,"show",t[1])},i:M,o:M,d(t){t&&p(e)}}}function Y(n,e,t){let{pos:s}=e,{parent:o}=e,a=Math.atan2(s.y-o.y,s.x-o.x),f=Math.sqrt((s.y-o.y)**2+(s.x-o.x)**2),i=!1;return E(()=>requestAnimationFrame(()=>setTimeout(()=>t(1,i=!0),100))),n.$$set=l=>{"pos"in l&&t(4,s=l.pos),"parent"in l&&t(0,o=l.parent)},[o,i,a,f,s]}class Z extends k{constructor(e){super(),I(this,e,Y,X,P,{pos:4,parent:0})}}function B(n,e,t,s){const o=e.x-n.x,a=e.y-n.y,f=s.x-t.x,i=s.y-t.y,l=(-a*(n.x-t.x)+o*(n.y-t.y))/(-f*a+o*i),r=(f*(n.y-t.y)-i*(n.x-t.x))/(-f*a+o*i),h=.001;return h<l&&l<1-h&&h<r&&r<1-h}function T(n,e,t,s){var o;const a=s.x-t.x,f=s.y-t.y,i=n.x-t.x,l=n.y-t.y,r=(i*a+l*f)/(f*f+a*a);return r>=0&&r<=1?o=(t.x+a*r-n.x)**2+(t.y+f*r-n.y)**2:o=r<0?(t.x-n.x)**2+(t.y-n.y)**2:(s.x-n.x)**2+(s.y-n.y)**2,o<e**2}class g{constructor(e,t){u(this,"pos");u(this,"parent");u(this,"children",[]);u(this,"fill",!1);u(this,"onResize");u(this,"spawnTries",0);if(e instanceof g){this.parent=e;const s=110-Math.random()*60,o=A(t??Math.random()*Math.PI*2);this.pos={x:e.pos.x+s*Math.cos(o),y:e.pos.y+s*Math.sin(o)}}else this.pos=e}collideWithNode(e){return e.parent&&T(this.pos,30,e.pos,e.parent.pos)?!0:e==this.parent?!1:!!((e.pos.x-this.pos.x)**2+(e.pos.y-this.pos.y)**2<30**2||this.parent&&T(e.pos,30,this.pos,this.parent.pos)||e.parent&&this.parent&&B(this.pos,this.parent.pos,e.pos,e.parent.pos))}collideWithScreen(){return this.pos.x<-20||this.pos.y<-20||this.pos.x>innerWidth- -20||this.pos.y>innerHeight- -20}validPosition(e){if(this.collideWithScreen())return!1;for(const t of e)if(this.collideWithNode(t))return!1;return!0}createChildren(e,t){for(;t-- >0;){const s=new g(this);s.validPosition(e)&&(e.push(s),this.children.push(s))}if(this.children.length==0){const s=new g(this,Math.random()*Math.PI/2);s.validPosition(e)&&(e.push(s),this.children.push(s))}this.children.length==3&&(this.fill=Math.random()<.9),this.children.length>0&&this.fill&&(this.children[Math.floor(Math.random()*this.children.length)].fill=!0)}}function A(n){const e=Math.PI*2;n=(n%e+e)%e;const t=8;return e*Math.round(t*n/e)/t}function C(n){let e;return{c(){e=b("div"),this.h()},l(t){e=W(t,"DIV",{class:!0,style:!0}),q(e).forEach(p),this.h()},h(){w(e,"class","node svelte-lsn9nb"),c(e,"--x",n[0].x+"px"),c(e,"--y",n[0].y+"px"),c(e,"--x0",n[3].x+"px"),c(e,"--y0",n[3].y+"px"),_(e,"fill",n[1]),_(e,"show",n[2])},m(t,s){y(t,e,s)},p(t,[s]){s&1&&c(e,"--x",t[0].x+"px"),s&1&&c(e,"--y",t[0].y+"px"),s&2&&_(e,"fill",t[1]),s&4&&_(e,"show",t[2])},i:M,o:M,d(t){t&&p(e)}}}function $(n,e,t){let{pos:s}=e,{parent:o}=e,{fill:a=!1}=e,f=o??s,i=!1;return E(()=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t(2,i=!0)))}),n.$$set=l=>{"pos"in l&&t(0,s=l.pos),"parent"in l&&t(4,o=l.parent),"fill"in l&&t(1,a=l.fill)},[s,a,i,f,o]}class ee extends k{constructor(e){super(),I(this,e,$,C,P,{pos:0,parent:4,fill:1})}}function z(n,e,t){const s=n.slice();return s[3]=e[t],s}function D(n){let e,t;return e=new Z({props:{pos:n[3].pos,parent:n[3].parent.pos}}),{c(){H(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,o){K(e,s,o),t=!0},p(s,o){const a={};o&1&&(a.pos=s[3].pos),o&1&&(a.parent=s[3].parent.pos),e.$set(a)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function F(n,e){var l;let t,s,o,a,f;s=new ee({props:{pos:e[3].pos,parent:(l=e[3].parent)==null?void 0:l.pos,fill:e[3].fill}});let i=e[3].parent&&D(e);return{key:n,first:null,c(){t=v(),H(s.$$.fragment),o=O(),i&&i.c(),a=v(),this.h()},l(r){t=v(),J(s.$$.fragment,r),o=Q(r),i&&i.l(r),a=v(),this.h()},h(){this.first=t},m(r,h){y(r,t,h),K(s,r,h),y(r,o,h),i&&i.m(r,h),y(r,a,h),f=!0},p(r,h){var S;e=r;const x={};h&1&&(x.pos=e[3].pos),h&1&&(x.parent=(S=e[3].parent)==null?void 0:S.pos),h&1&&(x.fill=e[3].fill),s.$set(x),e[3].parent?i?(i.p(e,h),h&1&&m(i,1)):(i=D(e),i.c(),m(i,1),i.m(a.parentNode,a)):i&&(L(),d(i,1,1,()=>{i=null}),V())},i(r){f||(m(s.$$.fragment,r),m(i),f=!0)},o(r){d(s.$$.fragment,r),d(i),f=!1},d(r){r&&p(t),N(s,r),r&&p(o),i&&i.d(r),r&&p(a)}}}function te(n){let e,t=[],s=new Map,o,a=n[0];const f=i=>i[3];for(let i=0;i<a.length;i+=1){let l=z(n,a,i),r=f(l);s.set(r,t[i]=F(r,l))}return{c(){e=b("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=W(i,"DIV",{id:!0,class:!0});var l=q(e);for(let r=0;r<t.length;r+=1)t[r].l(l);l.forEach(p),this.h()},h(){w(e,"id","container"),w(e,"class","svelte-4l6f4e")},m(i,l){y(i,e,l);for(let r=0;r<t.length;r+=1)t[r].m(e,null);o=!0},p(i,[l]){l&1&&(a=i[0],L(),t=G(t,l,f,1,i,a,s,e,U,F,null,z),V())},i(i){if(!o){for(let l=0;l<a.length;l+=1)m(t[l]);o=!0}},o(i){for(let l=0;l<t.length;l+=1)d(t[l]);o=!1},d(i){i&&p(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function se(n,e,t){let s=[],o=0;E(()=>{t(0,s=[new g({x:innerWidth/2,y:innerHeight/2})]),setTimeout(a,100)});function a(){const f=s.length;for(;o<f;)s[o++].createChildren(s,3);s.length!=f&&t(0,s),setTimeout(a,300)}return[s]}class le extends k{constructor(e){super(),I(this,e,se,te,P,{})}}export{le as default};
