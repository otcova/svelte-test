import{S as D,i as L,s as V,k as M,a as F,l as k,m as T,h as p,c as J,n as g,p as h,I as E,b as x,J as I,K as N,L as b,M as K,d as O,f as H,t as P,o as j,e as w,w as G,x as Q,y as U,z as X,g as Y,N as Z}from"../../chunks/index-702a5356.js";function C(r,e,t,l){const c=e.x-r.x,n=e.y-r.y,a=l.x-t.x,s=l.y-t.y,i=(-n*(r.x-t.x)+c*(r.y-t.y))/(-a*n+c*s),o=(a*(r.y-t.y)-s*(r.x-t.x))/(-a*n+c*s),f=.001;return f<i&&i<1-f&&f<o&&o<1-f?{x:r.x+o*c,y:r.y+o*n}:!1}function S(r,e,t,l){var c;const n=l.x-t.x,a=l.y-t.y,s=r.x-t.x,i=r.y-t.y,o=(s*n+i*a)/(a*a+n*n);return o>=0&&o<=1?c=(t.x+n*o-r.x)**2+(t.y+a*o-r.y)**2:c=o<0?(t.x-r.x)**2+(t.y-r.y)**2:(l.x-r.x)**2+(l.y-r.y)**2,c<e**2}function R(r){const e=r-1;return e*e*e+1}function B(r,{delay:e=0,duration:t=400,easing:l=R,x:c=0,y:n=0,opacity:a=0}={}){const s=getComputedStyle(r),i=+s.opacity,o=s.transform==="none"?"":s.transform,f=i*(1-a);return{delay:e,duration:t,easing:l,css:(y,d)=>`
			transform: ${o} translate(${(1-y)*c}px, ${(1-y)*n}px);
			opacity: ${i-f*d}`}}function v(r,{delay:e=0,duration:t=400,easing:l=R,start:c=0,opacity:n=0}={}){const a=getComputedStyle(r),s=+a.opacity,i=a.transform==="none"?"":a.transform,o=1-c,f=s*(1-n);return{delay:e,duration:t,easing:l,css:(y,d)=>`
			transform: ${i} scale(${1-o*d});
			opacity: ${s-f*d}
		`}}function A(r){let e,t,l,c,n,a,s,i;return{c(){e=M("div"),c=F(),n=M("div"),this.h()},l(o){e=k(o,"DIV",{class:!0,style:!0}),T(e).forEach(p),c=J(o),n=k(o,"DIV",{class:!0,style:!0}),T(n).forEach(p),this.h()},h(){g(e,"class","line svelte-1y5rs02"),h(e,"--len",r[3]+"px"),h(e,"--x",r[0].x+"px"),h(e,"--y",r[0].y+"px"),h(e,"--a",r[2]+"rad"),g(n,"class","node svelte-1y5rs02"),h(n,"--x",r[0].x+"px"),h(n,"--y",r[0].y+"px"),E(n,"fill",r[1])},m(o,f){x(o,e,f),x(o,c,f),x(o,n,f),i=!0},p(o,[f]){r=o,(!i||f&1)&&h(e,"--x",r[0].x+"px"),(!i||f&1)&&h(e,"--y",r[0].y+"px"),(!i||f&1)&&h(n,"--x",r[0].x+"px"),(!i||f&1)&&h(n,"--y",r[0].y+"px"),(!i||f&2)&&E(n,"fill",r[1])},i(o){i||(I(()=>{l&&l.end(1),t=N(e,v,{duration:1e3,delay:200}),t.start()}),I(()=>{s&&s.end(1),a=N(n,B,{x:-r[4].x,y:-r[4].y,duration:1e3,delay:0}),a.start()}),i=!0)},o(o){t&&t.invalidate(),l=b(e,v,{duration:1e3,delay:200}),a&&a.invalidate(),s=b(n,v,{duration:1e3,delay:0}),i=!1},d(o){o&&p(e),o&&l&&l.end(),o&&p(c),o&&p(n),o&&s&&s.end()}}}function ee(r,e,t){let{pos:l}=e,{parent:c}=e,{fill:n=!1}=e,a=Math.atan2(c.y-l.y,c.x-l.x),s=Math.sqrt((l.y-c.y)**2+(l.x-c.x)**2),i={x:l.x-c.x,y:l.y-c.y};return r.$$set=o=>{"pos"in o&&t(0,l=o.pos),"parent"in o&&t(5,c=o.parent),"fill"in o&&t(1,n=o.fill)},[l,n,a,s,i,c]}class te extends D{constructor(e){super(),L(this,e,ee,A,V,{pos:0,parent:5,fill:1})}}function $(r,e,t){const l=r.slice();return l[3]=e[t],l}function q(r,e){let t,l,c;return l=new te({props:{pos:e[3].pos,parent:e[3].parent,fill:e[3].fill}}),{key:r,first:null,c(){t=w(),G(l.$$.fragment),this.h()},l(n){t=w(),Q(l.$$.fragment,n),this.h()},h(){this.first=t},m(n,a){x(n,t,a),U(l,n,a),c=!0},p(n,a){e=n;const s={};a&1&&(s.pos=e[3].pos),a&1&&(s.parent=e[3].parent),a&1&&(s.fill=e[3].fill),l.$set(s)},i(n){c||(H(l.$$.fragment,n),c=!0)},o(n){P(l.$$.fragment,n),c=!1},d(n){n&&p(t),X(l,n)}}}function ne(r){let e,t=[],l=new Map,c,n=r[0];const a=s=>s[3];for(let s=0;s<n.length;s+=1){let i=$(r,n,s),o=a(i);l.set(o,t[s]=q(o,i))}return{c(){e=M("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=k(s,"DIV",{id:!0,class:!0});var i=T(e);for(let o=0;o<t.length;o+=1)t[o].l(i);i.forEach(p),this.h()},h(){g(e,"id","container"),g(e,"class","svelte-4l6f4e")},m(s,i){x(s,e,i);for(let o=0;o<t.length;o+=1)t[o].m(e,null);c=!0},p(s,[i]){i&1&&(n=s[0],Y(),t=K(t,i,a,1,s,n,l,e,Z,q,null,$),O())},i(s){if(!c){for(let i=0;i<n.length;i+=1)H(t[i]);c=!0}},o(s){for(let i=0;i<t.length;i+=1)P(t[i]);c=!1},d(s){s&&p(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}const u=40;function se(r,e,t){let l=[{pos:{x:u,y:u},parent:{x:u,y:u},children:[],delete:()=>{}}];j(()=>n(l[0]));function c(a,s){if(s<0)return!1;const i=Math.random()*2*Math.PI,o=220-Math.random()*120,f=a.pos.x+Math.cos(i)*o,y=a.pos.y+Math.sin(i)*o;if(f<u||y<u||f>innerWidth-u||y>innerHeight-u)return a.near_edge=!0,c(a,s-1);for(const _ of l)if((_.pos.x-f)**2+(_.pos.y-y)**2<u**2||S({x:f,y},u,_.pos,_.parent)||C({x:f,y},a.pos,_.pos,_.parent)||_!=a&&S(_.pos,u,{x:f,y},a.pos))return c(a,s-1);const d={pos:{x:f,y},parent:{...a.pos},children:[],fill:Math.random()<.2,delete:()=>{}};a.children.push(d),t(0,l=[...l,d]);const W=setTimeout(()=>n(d),5);let m=null;const z=()=>{d.near_edge&&!m&&(m=setTimeout(()=>{c(d,2),m=null},Math.random()*300)),(f<u||y<u||f>innerWidth-u||y>innerHeight-u)&&d.delete()};return d.delete=()=>{removeEventListener("resize",z),clearTimeout(W),m&&clearTimeout(m),t(0,l=l.filter(_=>_!=d));for(const _ of d.children)_.delete()},addEventListener("resize",z),!0}function n(a){requestAnimationFrame(()=>{let s=3*Math.random()+1;for(a==l[l.length-1]&&(s=100);c(a,s)||l.length<3;);})}return[l]}class le extends D{constructor(e){super(),L(this,e,se,ne,V,{})}}export{le as default};
